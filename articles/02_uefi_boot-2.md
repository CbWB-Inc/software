---
title: "UEFIブートで遊ぼっ！（２）" # 記事のタイトル
emoji: "🐈"                         # アイキャッチとして使われる絵文字（1文字だけ）
type: "tech"                        # tech: 技術記事 / idea: アイデア記事
topics: ["UTFブート","amd64"]       # タグ。["markdown", "rust", "aws"]のように指定する
published: false                    # 公開設定（falseにすると下書き）
---

## UEFI BOOT
まず第一歩として、UEFI BOOTして、kernelに制御を移したものの、UEFIサービスは終了させてしまっているので
ほとんど何もできません。文字を表示することさえできません。
というわけで、最低限ログを出せるようにしました。
開発環境はWindows11 ＋ wsl（Debian）＋VSCode＋QEMU です。

#### 概略
com1とデバッグコンソールに出力できるようにしました。
QEMUの構成上両方画面に出すとバッティングするので
com1をターミナルに、デバッグコンソールをdebug.logという
ファイルにそれぞれ出力します。
コード自体はlog_putcという関数なんですが長いのが面倒なので
ショートカットを定義しています。

出力対象は
・pc    1キャラクタ出力
・ps    文字列出力
・ph    16進64Bit数値出力(auto)
・ph2   16進8Bit数値出力
・ph4   16進16Bit数値出力
・ph8   16進32Bit数値出力
・ph16  16進64Bit数値出力

となっています。
log_initで初期化してから使います。

#### 所感
やっと色々試せるようになりました。
何か試して結果を確認してという形が取れるって
幸せなことだと思います。


#### 公開場所
laboratory/lab01/02_UEFI_boot-2

