boot.5.2

  æ–°é¹¿ç· ã‚å®šç¾©ã•ã‚ŒãŸæ•°å€¤ã‚’è¡¨ç¤ºã™ã‚‹ã“ã¨ã«æˆåŠŸã—ã¾ã—ãŸã€‚
  ã‚ã‚‰ã‹ã˜ã‚å®šç¾©ã—ãŸæ–‡å­—åˆ—ã‚’è¡¨ç¤ºã™ã‚‹ã¯æ—¢ã«ã‚„ã£ã¦ã„ã¾ã™ã€‚
  ã“ã“ã¾ã§çµæ§‹åœ°å‘³ãªå®Ÿé¨“ã‚’ã—ã¦ãã¾ã—ãŸãŒ
  ãã‚ãã‚å¤§æŠ€ã‚’è©¦ã—ãŸã„ã¨ã“ã‚ã§ã™ã€‚
  ã€ãƒ–ãƒ¼ãƒˆã‚»ã‚¯ã‚¿ã®å¤–ã«å®šç¾©ã—ãŸãƒ©ãƒ™ãƒ«ã¨ãã®ä¸­ã®ãƒ‡ãƒ¼ã‚¿ã‚’å‚ç…§ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã—ã‚‡ã†ã‹ï¼Ÿã€
  å˜ç´”ã«è¨€ã£ã¦ã—ã¾ãˆã°ã€ãƒ–ãƒ¼ãƒˆã‚»ã‚¯ã‚¿ã¨é•ã†é–¢ç”°ã‚’èª­ã¿è¾¼ã‚ã°ã„ã„ã‚“ã§ã™ãŒ
  ãƒ©ãƒ™ãƒ«ã¯å‚ç…§ã§ãã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ
  ã§ããªã„ã¨ã€ã‚¢ãƒ‰ãƒ¬ã‚¹ã§æŒ‡å®šã›ã–ã‚‹ã‚’å¾—ãªãã¦
  ä½¿ã„å‹æ‰‹ãŒéå¸¸ã«ã€ã™ã“ã¶ã‚‹ã€æ‚ªããªã‚Šã¾ã™ã€‚
  
  ã“ã“ã§ã¡ã‚‡ã£ã¨è©±ãŒåˆã‚ã‚‹ã‚“ã§ã™ãŒã€ãƒ–ãƒ¼ãƒˆã®ãƒ–ãƒ­ã‚°ã¨ã‹è³‡æ–™ã‚’è¦‹ã¦ã‚‹ã¨
  ãƒ–ãƒ¼ãƒˆã‚»ã‚¯ã‚¿ã§æ´¥ã«ã«èª­ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã¤ã‘ã¦
  ãã‚Œã‚’èª­ã¿è¾¼ã‚“ã§å®Ÿè¡Œã«ç§»ã™ã¿ãŸã„ã«æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚
  ã“ã‚ŒãŒå¤§å•é¡Œã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒã©ã“ã«ã‚ã‚‹ã‹ãªã‚“ã¦ã‚ã‹ã‚‰ãªã„ã—
  ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®ã—ãŸãƒã‚¤ãƒŠãƒªã‚¤ãƒ¡ãƒ¼ã‚¸ãªã‚“ã¦ä½œã‚Œãªã„ã‚“ã§ã™ã€‚
  ãƒã‚¦ãƒã‚¦ç„¡ã—ã€çŸ¥è­˜ãªã—ã€æŠ€è¡“ç„¡ã—ã€‚
  ã“ã®çŠ¶æ³ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚€ãªã‚“ã¦å¤¢ã®ã¾ãŸå¤¢ãªã‚“ã§ã™ã€‚
  
  è¦‹æ–¹ã‚’å¤‰ãˆã‚‹ã¨ã€ã‚ãŸã—ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹é€ ã¨ã‹ä»•çµ„ã¿ã‚’çŸ¥ã‚ŠãŸã„ã‚ã‘ã˜ã‚ƒãªã„ã€‚
  å˜ã«åˆ¥ã‚»ã‚¯ã‚¿ã®å€¤ãŒãƒ©ãƒ™ãƒ«ã§å‚ç…§ã§ãã‚‹ã‹ã©ã†ã‹ç¢ºèªã—ãŸã„ã€‚ãã‚Œã ã‘ãªã‚“ã§ã™ã­ã€‚
  1024Byteã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã‚‚ãƒ–ãƒ¼ãƒˆã§ã¯å…ˆé ­ã®512byteã—ã‹èª­ã‚“ã§ãã‚Œã¾ã›ã‚“ã€‚
  ãªã‚‰ã°ã®ã“ã‚Šã®512ï½‚ï½™ã¦ã¯è‡ªåŠ›ã§èª­ã‚€ã—ã‹ãªã„ã‚ã‘ã§ã™ã€‚
  ãƒ•ã‚¡ã‚¤ãƒ«ã®æ®‹ã‚Šã®512ï¼¢ï½™ï½”ï½…ã‚’ãƒ–ãƒ¼ãƒˆã§èª­ã¿è¾¼ã‚“ã ã™ãå…ˆã«ãŠã„ã¦ã‚ã’ã‚Œã°
  æœ€åˆã£ã‹ã‚‰1024ï¼¢ï½™ï½”ï½…èª­ã‚€ã®ã¨åŒã˜ã«ãªã‚‹ã‚“ã˜ã‚ƒãªã„ï¼Ÿ
  ãƒ©ãƒ™ãƒ«ã‚‚å‚ç…§ã§ãã‚‹ã‚“ã˜ã‚ƒãªã„ï¼Ÿ
  
  ã¨ã„ã†è€ƒãˆã®ã‚‚ã¨ã€ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ¼ãƒ‰ã«æŒ‘æˆ¦ã™ã‚‹ã‚ã‘ã§ã™ã€‚
  çµæœã¯ï¼Ÿ
  r-aikaã¡ã‚ƒã‚“å¤§å‹åˆ©â™ª
  Hello 2nd sector!


boot.5.2

  I successfully displayed a statically-defined number.
  String output using predefined data was already working before.

  So far, these have been modest experiments â€”  
  but now, itâ€™s time for something big.

  â€œCan I reference a label and its data that lies *outside* the boot sector?â€

  In theory, itâ€™s simple: just read another sector into memory.  
  But will labels still work?

  If not, Iâ€™d have to use absolute addresses â€” and that would beâ€¦ horrifically awkward.

---

  This brings me to an issue:

  Boot blogs and tutorials often say something like:  
  â€œThe boot sector finds a file and loads it for execution.â€

  Thatâ€™s a huge problem.  
  I have no idea where the file is.  
  I canâ€™t build a filesystem-aware image.  
  I have no tools, no knowledge, no prior experience.

  Reading files? Thatâ€™s still a fantasy.

---

  But letâ€™s shift perspective:

  Iâ€™m not trying to understand filesystems.  
  I just want to know:

  **Can I reference a label whose data resides in a different sector?**

  A 1024-byte file gets only its first 512 bytes read by BIOS.  
  So Iâ€™ll have to manually read the remaining 512 bytes.

  What if I place the â€œsecond halfâ€ of the file **right after** the boot sector in the image,  
  and manually read it in using `INT 13h`?

  Wouldnâ€™t that make it feel like I read the full 1024 bytes from the start?  
  Wouldnâ€™t labels work too?

---

  So I tried reading in that second sector.

  The result?

  ğŸ‰ r-aika wins big!  
  **Hello 2nd sector!**
